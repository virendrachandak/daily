Firefox远程调试协议-----> 本文讲述Firefox中实现的远程调试协议。Firefox实现了`Remote Debugging Protocol`（远程调试协议），这是Firefox内置JavaScript调试器的基础。可以在[Github调试器文档库](https://github.com/jimblandy/DebuggerDocs)上查看草案和参与讨论。Mozilla的调试协议允许调试器连接浏览器，发现可以调试和查看的设备，选择监听的JavaScript线程，以及观察和修改JavaScript的线程执行。该协议提供了JavaScript、DOM节点、CSS规则以及其他在客户端WEB应用中用到的技术的统一视图。该协议需要保持通用性，以便于在其他类型客户端（例如，性能收集器（`profiler`）上以及服务器端（邮件阅读器；XUL应用）的扩展使用。调试器（客户端）和浏览器（服务端）之间的通信格式为JSON对象。这样使得协议可以直接阅读，也能有涯升级，并且能够使用已有的库来轻松实现。最重要的是，能够轻松地模拟测试和实验。协议在JavaScript层，而不是C++或者机器层操作，并且假设JavaScript本身的实现是健康和响应式的。正在执行的JavaScript程序有可能出错，但是JavaScript实现的内部状态不能崩溃。（JavaScript）实现的Bug可能引起调试器失效；被解释的程序中的Bug不能让调试器失效。### 内容1.  通用约定  1.1 Actors  1.2 数据包  1.3 Actor通讯的通用模式    1.3.1 请求/回复模式    1.3.2 请求/回复/通知模式    1.3.3 错误数据包  1.4 Grips    1.4.1 对象        1.4.1.1 属性描述        1.4.1.2 查找对象的原型和属性        1.4.1.3 查找对象原型        1.4.1.4 列出对象的私有属性名        1.4.1.5 查找单个属性的描述符        1.4.1.6 函数      1.4.2 长字符串      1.4.3 Grip Lifetime  1.5 完成值  1.6 源定位2.  根Actor  2.1 列出浏览器标签  2.2 `Chrome`调试  > `Chrome`指的浏览器原生代码，而不是指`Google Chrome`浏览器3.  和线程Actor的交互  3.1 绑定到一个线程  3.2 从线程解绑  3.3 执行线程  3.4 线程暂停  3.5 回复线程  3.6 中断线程  3.7 退出线程4.  查看暂停的线程  4.1 加载脚本源码    4.1.1 黑盒源码  4.2 列出Stack Frame    4.2.1 全局代码帧    4.2.2 函数调用帧    4.2.3 执行帧    4.2.4 客户端执行帧  4.3 弹出Stack Frame  4.4 执行源码语言表达式5.  词法环境  5.1 词法环境示例6.  断点7.  时间监听器8.  监测点9.  Frame Pop监测----# 1. 通用约定##   1.1Actors`Actor`是在服务器端与客户端交换JSON数据报的对象。来自客户端的所有数据包都指定了它所要到达的`actor`，而服务端的所有数据包也指定了发送它们的`actor`。所有服务器都有一个根`actor`，这是客户端首先交互的对象。根`actor`可以解释服务器能展现什么内容（浏览器；邮件阅读器；等等），并且枚举出能够调试的对象：标签、`chrome`等。反过来，这些对象也由请求能够处理的`actor`所表示。正在调试的程序对象，例如JavaScript对象和`stack frame`，以及调试机制，例如断点和监测点，都是带有可交换数据包的`actor`。 例如，调试器可能连接到浏览器，请求根`actor`列出浏览器的标签，并且向开发者展示该列表。如果开发者选择了一些标签来调试，那么调试器可能发送`attach`请求到表示这些标签的`actor`来启动调试。`actor`名称是JSON字符串，不含空格和冒号。根`actor`的名称为`root`。为了让服务器重用`actor`名称和需要的资源，`actor`的生存时间是有限的。服务器里的所有`actor`组成了一棵树，这棵树的根就是根`actor`。关闭一个`actor`的通讯会自动关闭其子孙的通讯。例如，表示线程`stack frame`的`actor`是表示线程本身的`actor`的子孙，因此在调试器从线程解除绑定，也就是关闭线程`actor`时，这个帧的`actor`也会被自动关闭。##   1.2数据包##   1.3Actor通讯的通用模式###  1.3.1请求/回复模式###  1.3.2请求/回复/通知模式###  1.3.3错误数据包##   1.4 Grips###  1.4.1 对象#### 1.4.1.1 属性描述#### 1.4.1.2 查找对象的原型和属性#### 1.4.1.3 查找对象原型#### 1.4.1.4 列出对象的私有属性名#### 1.4.1.5 查找单个属性的描述符#### 1.4.1.6 函数###  1.4.2 长字符串###  1.4.3 Grip Lifetime## 1.5 完成值## 1.6 源定位# 2.根Actor## 2.1 列出浏览器标签## 2.2 `Chrome`调试# 3.和线程Actor的交互## 3.1 绑定到一个线程## 3.2 从线程解绑## 3.3 执行线程## 3.4 线程暂停## 3.5 回复线程## 3.6 中断线程## 3.7 退出线程# 4.查看暂停的线程##  4.1 加载脚本源码### 4.1.1 黑盒源码##  4.2 列出Stack Frame###  4.2.1 全局代码帧###  4.2.2 函数调用帧###  4.2.3 执行帧###  4.2.4 客户端执行帧##  4.3 弹出Stack Frame##  4.4 执行源码语言表达式# 5.词法环境##   5.1 词法环境示例# 6.断点# 7.时间监听器# 8.监测点# 9.Frame Pop监测### 参考链接<https://wiki.mozilla.org/Remote_Debugging_Protocol>
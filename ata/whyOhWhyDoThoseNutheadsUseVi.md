为什么那些疯子使用`vi`?
---

是的，即使你不相信，`vi`（或者在最近，只有15年历史的更好的克隆和极大改进版本的`vim`）这个拥有30年历史的编辑器有一大批粉丝。

不，这些粉丝并非不愿与时俱进的“恐龙”——`vi`用户社区已知在保持增长：我自己，我也仅从两年前开始才使用`vi`（当了超过10年的专业程序员后）。我的朋友也在转变。大部分`vi`用户在`vi`编写的时候甚至都还没出生。

是的，`vi/vim`编辑模式比其他编辑器要优越肯定是有原因的。你不必是`Unix`大拿也可以使用`vi/vim`，[`vim`](http://www.vim.org/)基本上在所有平台都可以使用，而且有许多插件可以提供所有主流`IDE`拥有的功能。让我们尝试解释一些常见的误解，并且了解一些证明`vi/vim`是最棒的杀手级编辑器的实例。

### 误解#1：模块化编辑

当你第一次误打误撞使用`vi`或者`vim`是，你会感到震惊和恶心，因为你必须使用`i`才能开始输入文字。不记得`hjkl`到底是往哪个方向移动。如果希望在一行的最后一个字符后插入内容，必须按`a`。因为你可能已经习惯了其他编辑器，而且如果箭头键在插入模式下能够使用（如果系统配置合适的话，箭头键是可以使用的，90%的情况都是如此），你会停留在插入模式并且不愿回到普通模式，除非绝对必须。你可能会画上20分钟而且不愿返回。并且也会抱怨：“[到底要怎样我才能记住我是在插入模式还是普通模式？](http://www.dina.kvl.dk/~abraham/religion/vi-tutorial.html)”

实际上，这是完全错误的使用`vi`和`vim`的方式。`vi/vim`的合适使用不需要进行模块化使用。你会已知在普通（`normal`）模式。这样，*记住模式的问题*就不复存在了：你不用因为在插入模式时因为打电话而忘了到底在什么模式。如果你挣扎输入文字时电话响了，你可以退出插入模式来打电话。或者你可以在打完电话后按下`<Esc>`键。但是你不用将插入模式看成你带过的模式。

让我来解释一下这后面的哲理。

`vi/vim`中的命令是需要组合使用的，`d`表示删除，`e`表示移动到词尾，那么`de`这个完整的命令会删除到当前词的词尾（而在大部分常规的编辑器里，需要`Ctrl+Shift+Right`，然后按`Left`箭头键，然后按`del`键）。

这样的好处之一在于`.`可以重复最近一次完成的组合编辑命令（不是移动命令）。例如，执行完`dw`命令后，`.`会变成一个删除到下一个词开头位置的命令。可以使用强大的导航命令随意移动，然后随心按下`.`会快速删除到下一个词。这样的操作真是让人难以置信的强大！

聊到插入命令。这些命令会进入插入模式，允许用户输入文字，直到按下`<Esc>`键。好了，在这些命令情况下，完整的命令包含你在输入`i`（或者用于进入插入模式的任何其他命令，有好几条这样的命令）并且按下`Esc`。

这意味着如果输入`iHello<Esc>`，会在当前鼠标位置输入`Hello`。这意味着所有的`.`命令也会在当前鼠标位置输入`Hello`。你可以理解到这条命令的强大了。但是更好的是，`A`可以移动到当前行的结尾并且进入插入模式。因此，在通过按下`<Esc>`完成插入后，可以在任何位置按下`.`进入行为完成同样的操作。

一个更加强大的示例：`ce`命令，由`c`和`e`组成。*`c`hange*命令删除下一个动作命令指定范围的文字，并且进入插入模式。这与`d`命令相同，但是最明显的区别在于会进入插入模式，而不会停留在普通模式。这样的好处在于在下一个输入操作中的文本内容也会变成命令的一部分。因此如果你执行`ceHello<Esc>`命令，你会将当前鼠标位置到词尾的内容使用`Hello`替换，而接下来的`.`命令也会这样：将知道词尾的内容使用`Hello`替换。

动作（`motion`，鼠标移动命令）也可以更加复杂，而且还有各种进入插入模式的命令（`o`在当前行下方创建新行，`O`在当前行上方创建一行，`S`来删除到行尾，等等，所有这些命令都会在执行完后进入插入模式）。因此你可以想象可以使用`.`来创建和重复怎样的强大的迷你编辑操作。

### 示例#1：绝妙的`.`命令

让我们看一个具体的示例。假设你在头文件中声明了三个新的函数，你需要在模块中实现它们。可以将下面的文字复制并且粘贴到实现文件中：

![所有代码的起始都像这样，不是吗？](http://www.viemu.com/why-vi-img/why-vi-1-1.gif)

现在你需要删除他们的分好，并且添加一个空的函数体。如果鼠标在上图所示的位置，可以使用`A`命令来直接进入跳到行为进入插入模式：

![按下`A`后，可以看到插入鼠标的位置到了当前行尾](http://www.viemu.com/why-vi-img/why-vi-1-2.gif)

现在可以使用`<backspace>`命令来删除分号：

![删除非常简单](http://www.viemu.com/why-vi-img/why-vi-1-3.gif)

然后输入`<return>{<return>}<return>`来插入空的函数体。

![插入和其他编辑器相同](http://www.viemu.com/why-vi-img/why-vi-1-4.gif)

最后，按下`<Esc>`来返回普通模式：

![](http://www.viemu.com/why-vi-img/why-vi-1-5.gif)

现在，需要对剩下的两行重复相同的操作。怎么做呢？简单：首先，按`j`来向下移动鼠标，按`.`来重复最后执行的完整编辑命令（`A`和`backspace`以及插入文字操作）。如果执行`j.j.`，即执行两次，代码会变成下面这样：

![](http://www.viemu.com/why-vi-img/why-vi-1-6.gif)

`vi`的命令结构非常关键，`<backspace>`也是常规输入编辑队列的一部分，编辑操作非常容易重复。而且想想，日常有多少编辑操作是重复的？

## 误解#2：并非全部关于正则表达式

`vi/vim`处理正则表达式的能力非常强大。所有比较正经的编辑器都支持使用正则表达式来搜索、替换，但是只有`vi`可以使用正则进行非常复杂的操作，例如执行某种正则搜索。

## 英文原文

[http://www.viemu.com/a-why-vi-vim.html](http://www.viemu.com/a-why-vi-vim.html)

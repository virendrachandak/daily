http://howtonode.org/understanding-process-next-tick
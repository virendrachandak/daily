https详解---> 希望读完这篇文章，能比较详细地了解HTTPS。# 基础知识# 什么是HTTPS？`HTTPS`的全称是`Hypertext Transfer Protocol Secure`。从技术上来说，其实它本身并不是一个协议，而是在[`SSL/TLS`]协议的基础上使用[`HTTP`]协议，从而通过`SSL/TLS`来增加标准`HTTP`通讯的安全性。`HTTPS`的主要目的是为了防止[窃听——`wiretapping`](https://en.wikipedia.org/wiki/Wiretapping)，[会话劫持—— `session hijacking`](https://en.wikipedia.org/wiki/Session_hijacking)和[中间人攻击——`man-in-the-middle-attacks`](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)。> 当然，在我朝，还有一个重要用途就是用来访问连接普通服务器时有问题的网站。### 可能发生的问题以下情况可能破坏HTTPS的安全性，需要<b style="color:red; font-size:1.125em">注意</b>：* 一些连接重定向到了普通地址（即URL协议部分不是`HTTPS`的地址）。* 网站的大部分脚本和CSS样式文件从HTTPS服务器加载，但是如果添加了连接到外部服务器的脚本或者CSS样式文件等资源文件，则存在破坏安全性的风险。* 性能问题：[`SSL`](https://en.wikipedia.org/wiki/Secure_Sockets_Layer)协议的开销，约1%的服务器CPU、流量、客户端CPU和第一次连接延迟。> HTTP、HTTPS性能比较> 首先，答案肯定是HTTP性能高，因为HTTPS相比HTTP需要做更多的事情。但是HTTPS具体比HTTP慢多少，还受到许多因素的影响。> HTTPS比HTTP慢的原因：初始握手（`handshake`）非常慢。握手实际传输的数据量并不大（基本上小于5kB），但是对于非常小的请求，这样的开销也是非常大的。但是，握手完成后，就会使用非常快速的对称加密，来尽量降低开销。但是底线是：通过HTTPS来发出许多短请求比HTTP慢，但是如果通过单个请求传输大量数据的话，差别不会很明显。> 不过，`HTTP/1.1`默认会`keepalive`（保持连接），因此只要做一次握手，以后的请求都会通过相同的连接来进行。这样可以显著减小HTTPS与HTTP的性能差别。（实际上握手的成本大约是每次会话至少`4-10x`，因为大部分浏览器会对相同的服务器使用多个连接。根据浏览器`https-keep-alive`的时间，一个会话可能会重复有多次握手）不过，现在的大部分服务器和浏览器，以及`SSL/TLS`实现都用到了会话重用，多个连接也会重用相同的`SSL`会话，因此，这也相对降低了HTTPS的开销。> 影响HTTPS和HTTP比较的因素主要包括：### SSL Handshake基于HTTP的SSSL连接通过是由客户端通过使用以`https://`（而不是`http://`）开头的URL访问网站发起的。在SSL会话开始时，会执行一次`SSL handshake`（SSL 握手）### 用途常见的几种HTTPS应用场景：* 防止窃听，防止抓取密码、cookie等敏感信息（例如，使用像[`Firesheep`](https://en.wikipedia.org/wiki/Firesheep)这样的工具）。公司网络、学校网络以及咖啡店等公共无线网络的窃听问题尤其严重。> 当然，如果只是抓密码的话，用`wireshark`也可以。* 一些用户的网络连接较差，会间歇性破坏字符。在编辑页面时可能会引发各种怪异的问题。大部分情况是连接到无线或手机网络。使用HTTPS可以修复这些问题，因为安全连接相对于普通连接有更好的错误检测机制。* 一些网络访问点（例如一些酒店或者咖啡厅的公用Wi-Fi）会在各种页面上注入广告，使用安全连接可以防止这样的问题。# 操作实践## HTTPS下的HTTP通讯## SPDY## HTTPS与前端开发## HTTPS与SEO## HTTPS服务器### 图片### 域名* 例如淘宝的CDN有多个域名### 利用Node来代替Tengine实现多终端图片适配# 更多内容### 参考资料1.  [Http vs Https: What's the difference?](http://blogs.msdn.com/b/securitytipstalk/archive/2011/04/04/http-vs-https-what-s-the-difference.aspx)2.  [Wikipedia HTTP Secure英文](https://en.wikipedia.org/wiki/HTTP_Secure)3.  [Wikipedia HTTPS 中文](https://zh.wikipedia.org/wiki/HTTPS)4.  [Wikipedia:Secure_server](https://en.wikipedia.org/wiki/Wikipedia:Secure_server)5.  [HTTP vs HTTPS performance](https://stackoverflow.com/questions/149274/http-vs-https-performance)6.  [How much overhead dose SSL impose?](https://stackoverflow.com/questions/548029/how-much-overhead-does-ssl-impose)7.  [The SSL handshake](http://publib.boulder.ibm.com/tividd/td/ITAME/SC32-1363-00/en_US/HTML/ss7aumst18.htm)### 部署了HTTPS的著名网站* [Wikipedia](https://www.wikipedia.org/)* [stackoverflow](https://stackoverflow.com/)### 相关概念`OCSP``CSP``TLS``Firesheep``SPDY``DATA URI``Secure Domain``Secure Server``XSS``HTTPS Deployment`
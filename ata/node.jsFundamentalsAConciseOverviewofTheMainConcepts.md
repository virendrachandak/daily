Node.js基础：主要概念简略----Node.js是一个高效可扩展、非阻塞I/O平台，基于Chrome V8引擎和ECMAScript构建。因此，大部分前端JavaScript（ECMAScript的实现）对象、函数以及方法都可以在Node.js中使用。## Read-Eval-Print Loop(简称REPL)在控制台或者命令行输入`node`即可进入REPL，在REPL中可以执行类似Chrome开发者工具的命令。Node.js和浏览器的ECMAScript实现存在一些小差别（例如`{} + {}`），不过大部分结果还是相同的。## 启动Node.js脚本一般的用法是：`node xxx.js`如果只需要执行一组声明，或者只运行内联的JavaScript/Node.js脚本，可以这样使用：```node -e "console.log(new Date());"```## Node.js进程信息每一个运行的Node.js其实是一个进程。可以下面的命令查看运行的Node.js进程：```ps aux | grep -i node```或者```pgrep node```也可以在Node.js的代码里通过`process`对象来查看进程信息，例如：```node -e "console.log(process.pid)"```## 访问Node.js的全局作用域浏览器的JavaScript默认作用域为全局作用域（即没有使用var声明的情况）。这也是老道（Douglas Crockford）吐槽JavaScript的重要一点。Node.js的设计默认为局部作用域（local scope）。如果需要访问全局对象，可以使用`global`对象。可以说，前端/浏览器端JavaScript的的`window`对象在Node.js中变成了`global`和`process`对象的组合，而用于表示页面DOM结构的`document`对象在`Node.js`中是不存在的。## `export`和`import`模块浏览器端JavaScript另一个缺点是不能引用模块。`CommonJS`和`RequireJS`使用`AJAX-y`的方式解决了这个问题。Node.js借鉴了`CommonJS`的概念。在Node.js中`export`一个对象，应该使用`exports.name = object`，例如：```javascriptvar messages = {  find : function(req, res, next) { //... },  add : function(req, res, next) { //... },  format: 'title | date | author'};exports.messages = messages;```然后就可以这样引用这个脚本了（假设路径和文件名为`./route/messages.js`）：```var messages = require('./routes/messages.js');```然而有的时候更适合引用构造函数，例如设置`Express`应用的属性时。这种情况下需要使用`module.exports`：```module.exports = function(app) {  app.set('port', process.env.PORT || 3000);  app.set('view', __dirname + '/views');  app.set('view engine', 'jade');  return app;};```然后可以在`Express`应用的主文件中这样引用：```var app =express();var config = require('./config/index.js');app = config(app);```更简洁的代码为（可读性太差，强烈不建议）：```var app = express();require('./config/index.js')(app);```在引用模块时最常见的错误是文件路径不对。对于Node.js核心模块，可以直接使用名字引用，不需要加任何路径名，例如`require('name')`。`node_modules`文件夹下的模块也使用同样的方式引用。对于其他模块，需要加上相对路径符号和文件名，而且最好加上文件扩展名，例如：```var keys = require('./keys.js'),    messages = require('./routes/messages.js');```此外，对于上面代码中的`message`所在的目录，也可以使用`__diranme`和`path.join()`，例如：```require(path.join(__dirname, 'routes', 'messages'))```> [`path`对象官方文档](http://nodejs.org/api/path.html)> `__dirname`只在脚本中有定义，在REPL中不可用。